const { storyGenerationEngine } = require('./dist/lib/story.js');

// 실제 세션 데이터
const responses = [
  {
    transcript: '음… 오늘같이 조용하고 따뜻한 오후면요, 옛날에 제가 시장에서 통닭집 하던 생각이 나네요.\n비가 촉촉이 오던 날이었어요. 가게 앞 그 주황 가로등 아래로 빗방울이 반짝였고, 기름 냄새에 참기름 향이 섞여서 코끝이 따뜻했죠. 그라고, 튀김기 "지글지글" 소리 들리면 손님들이 우산 접으며 "사장님, 반 마리만요!" 하던 그 소리가 아직도 귓가에 있어요.\n\n그날 딸애가요, 간호대 합격 통지를 들고 뛰어왔거든요. 비에 젖은 머리카락로 얼굴이 반쯤 가려졌는데, 웃는 눈이 번쩍—참말로 예뻤죠. 저는 장갑 낀 손으로 닭을 뒤집다가, 어이구 손님 앞에서 울 뻔했다니까요. "우리 딸, 해냈다!" 하고는 바로 닭 한 마리 더 튀겨서 식히지도 않고 포장해 들려보냈어요. 사위 될 사람한테 자랑하라꼬요, 하하.\n\n그때 느꼈던 건… 음, 고생 끝에 딱 한 모금 달큰한 국물 같은 기분이었어요. 비 소리, 따뜻한 불빛, 손님들 말소리 사이로 "괜찮다, 잘했다"는 말이 제 마음에서 저절로 나왔지요. 그래서 비 오는 오후면, 저는 아직도 가게 문 앞 고무발판을 손으로 쓸어내리는 느낌이 나요. 미끄럽지 말라고, 조심하라고요. 그런 사소한 손길들이 우리 가족을 여기까지 데려온 거 같아요.\n\n오늘은… 그때처럼 누군가에게 따뜻한 한 상 차려주고 싶은 마음이 듭니다. 비가 왔다 그쳤다 하는 날은, 사람 마음도 부드러워지거든요',
    timestamp: '2025-09-26T05:23:59.775Z'
  },
  {
    transcript: '음… 한마디로 하면 따뜻하게 벅찬 마음이었어요.\n가게 기름 소리 사이로 비가 톡톡 떨어지는데, 가슴 속에서 뭔가가 훅 하고 풀리는 느낌이 났지요. 그동안 새벽부터 닭 손질하던 피곤이, 그 순간엔 달큰한 국물 한 모금처럼 스르르 내려갔어요.\n\n딸애 얼굴 보자마자 눈시울이 뜨거워졌고, 손은 계속 닭을 뒤집는데 마음은 "됐구나, 해냈구나" 하고 외치고 있었지요. 비 냄새, 따뜻한 조명, 손님들 웃음소리까지 전부가 나를 축하해 주는 합창처럼 들렸어요.',
    timestamp: '2025-09-26T05:24:54.503Z'
  },
  {
    transcript: '있지요, 하나 더 해볼게요.\n\n그날 저녁 무렵이었어요. 비는 잦아들고, 가게 안 벽시계가 "똑—딱" 고르게 울던 시간. 막 치킨 한 판을 건져 올렸는데, 문 앞에서 고무우산을 반쯤 접고 서성이는 꼬마가 보였지요. 교복도 아닌데 어깨에 낡은 가방 하나, 슬리퍼에 양말이 젖어서 발가락이 시려 보이더라고요.\n\n"아가, 뭐 찾나?" 하니까, 꼬마가 작게 말했어요. "어… 엄마야 야근이라서요. 그냥 냄새 맡으러 왔어요."\n그 말에 가슴이 툭 내려앉더군요. 그라고는 아무 말 없이 닭다리 두 개를 작은 종이봉지에 넣고, 식혀둔 떡꼬치 하나를 꽂아줬죠. "뜨겁다, 조심해. 비 그치면 집에 얼른 가라."\n꼬마가 고개를 꾸벅 하고는 길을 건너는데, 가게 유리창에 비친 주황 가로등 불빛 속에서 그 작은 등이 유난히 가벼워 보였어요. 그 순간에 문득, 제 어린 딸·아들도 저만큼 작던 때가 생각났지요. 돈이 없어서 시장 통닭 냄새만 맡고 집에 가던 날들… 그래도 다음 날이면 또 해가 뜨고, 우린 어떻게든 한 끼를 차려 먹었어요.\n\n그날 밤, 라디오에서 이미자 노래가 흘러나왔어요. 저는 기름불을 줄이고, 튀김망을 닦으면서 혼잣말로 중얼거렸죠. "사람 사는 건 다 거기서 거기다. 배 안 비고, 마음만 따뜻하면 됐다."\n그 말이 이상하게 가슴에 오래 남았습니다. 그래서 그 뒤로는 비 오는 날이면 닭다리 두 개 더 튀겼어요. 혹시 또 문 앞에서 냄새 맡는 애가 있을까 싶어서요. 누구한테 갔는지는 몰라도, 따뜻한 한 입이 그날의 저처럼 누군가를 조금은 살게 했을 거라 믿어요.\n\n…이런 게 제겐 소중한 이야기예요. 비, 주황 불빛, 지글지글 소리, 종이봉지의 따뜻함—그게 다 합쳐지면, 지금도 마음 한쪽이 포근해집니다.',
    timestamp: '2025-09-26T05:25:37.736Z'
  }
];

// 스토리 생성
const narrative = storyGenerationEngine.generateNarrative('test_session_001', responses);

console.log('=== 개선된 스토리 생성 결과 ===');
console.log('제목:', narrative.title);
console.log('요약:', narrative.summary);
console.log('\n=== 챕터들 ===');
narrative.chapters.forEach((chapter, index) => {
  console.log(`\n--- 챕터 ${index + 1}: ${chapter.title} ---`);
  console.log(chapter.content);
  console.log(`\n단어 수: ${chapter.wordCount}`);
});
console.log('\n=== 테마 ===');
console.log(narrative.themes.join(', '));
console.log('\n=== 등장인물 ===');
narrative.characters.forEach(char => {
  console.log(`- ${char.name} (${char.role}): ${char.description}`);
});
console.log('\n=== 감정 아크 ===');
console.log(narrative.emotionalArc.join(' → '));
console.log('\n=== 타임라인 ===');
console.log(narrative.timeline);
